<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Scratchのための色の表現</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script>
            const RGBToHSL = (r, g, b) => {
            [r, g, b] = [r, g, b].map(v => v / 255);
            const l = Math.max(r, g, b),
                    s = l - Math.min(r, g, b),
                    h = s ? l === r ? (g - b) / s : l === g ? 2 + (b - r) / s : 4 + (r - g) / s : 0;
            return [
                $('output #hue').text(`色相: ${round((60 * h < 0 ? 60 * h + 360 : 60 * h) * 100 / 360, 0)}`),
                $('output #saturation').text(`彩度: ${round(100 * (s ? (l <= 0.5 ? s / (2 * l - s) : s / (2 - (2 * l - s))) : 0), 0)}`),
                $('output #lightness').text(`明度: ${round((100 * (2 * l - s)) / 2, 0)}`),
            ];
            };

            const round = (value, decimalPlaces) => Math.round(value * 10 ** decimalPlaces) / 10 ** decimalPlaces;

            $(document).ready(() => {
            $('button[type="submit"]').on('click', () => {
                RGBToHSL(...['red', 'green', 'blue'].map(c => $('input[name="' + c + '"]').val()));
            });
            });
        </script>
    </head>
    <body>
        <label for="red">赤<input type="number" name="red" max="255" min="0" maxlength="3" minlength="1"></label>
        <br>
        <label for="green">緑<input type="number" name="green" max="255" min="0" maxlength="3" minlength="1"></label>
        <br>
        <label for="blue">青<input type="number" name="blue" max="255" min="0" maxlength="3" minlength="1"></label>
        <br>
        <button type="submit">送信</button>
        <br>
        <output><span id="hue"></span><br><span id="saturation"></span><br><span id="lightness"></span></output>
    </body>
</html>
